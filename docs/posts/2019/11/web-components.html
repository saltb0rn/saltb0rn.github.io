<!DOCTYPE html>
<html lang="en">
<head>
<!-- 2021-09-30 ÖÜËÄ 13:08 -->
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Web Components</title>
<meta name="generator" content="Org mode">
<meta name="author" content="saltb0rn">
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: auto;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline; margin-top: 14px;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .equation-container {
    display: table;
    text-align: center;
    width: 100%;
  }
  .equation {
    vertical-align: middle;
  }
  .equation-label {
    display: table-cell;
    text-align: right;
    vertical-align: middle;
  }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { width: 90%; }
  /*]]>*/-->
</style>
<!-- <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no"> -->
<meta name="referrer" content="same-origin">
<link rel="stylesheet" type="text/css" href="../../../css/stylesheet.css"/>
<link rel="icon" type="image/png" href="../../../img/icon.png" />
<!-- <script type="text/javascript" src="../../../js/live.js" defer></script> -->
<script src="../../../js/main.js" defer></script>
<script type="text/javascript">
// @license magnet:?xt=urn:btih:1f739d935676111cfff4b4693e3816e664797050&amp;dn=gpl-3.0.txt GPL-v3-or-Later
<!--/*--><![CDATA[/*><!--*/
     function CodeHighlightOn(elem, id)
     {
       var target = document.getElementById(id);
       if(null != target) {
         elem.classList.add("code-highlighted");
         target.classList.add("code-highlighted");
       }
     }
     function CodeHighlightOff(elem, id)
     {
       var target = document.getElementById(id);
       if(null != target) {
         elem.classList.remove("code-highlighted");
         target.classList.remove("code-highlighted");
       }
     }
    /*]]>*///-->
// @license-end
</script>
</head>
<body>
<div id="org-div-home-and-up">
    <nav>
        <a href="../../../"><img src="../../../img/logo.png" alt="Logo is on the way"/></a>
        <ul>
            <li><a accesskey="H" href="../../../"> Home </a></li>
            <li><a accesskey="T" href="../../../tags"> Tags </a></li>
            <li><a accesskey="A" href="../../../about"> About </a></li>
            <li><a accesskey="L" href="../../../todos"> Todos </a></li>
        </ul>
    </nav>
</div>
<div id="content">
<h1 class="title">Web Components</h1>
<div class="abstract" id="org9eb259f">
<p>
å‰ç«¯ç»„ä»¶åŒ–å·²ç»æ˜¯å¤§åŠ¿æ‰€è¶‹äº†,éšç€ç»„ä»¶åŒ–çš„å£å·è¶Šæ¥è¶Šå“,åœ¨è¿™ç§èƒŒæ™¯ä¸‹è¯ç”Ÿäº†ä¸€äº›ç”¨æ¥å®ç°ç»„ä»¶åŒ–çš„å¼€å‘å·¥å…·,
</p>

<p>
åœ¨å¦å¤–ä¸€æ–¹é¢,éšç€æµè§ˆå™¨çš„ç°ä»£åŒ–,WEBå‰ç«¯æ ‡å‡†åŒ–ä¹Ÿè¶Šæ¥è¶Šé‡è¦,å°±è¿å¾®è½¯ä¹Ÿæ„è¯†åˆ°äº†è¿™ä¸ªè¶‹åŠ¿,åœ¨ä»Šå¹´4æœˆå·¦å³å¼€å§‹å®£å¸ƒæ–°ç‰ˆçš„Edgeå¼€å§‹ä½¿ç”¨ <code>chromium</code> å†…æ ¸,
</p>

<p>
æˆªè‡³ç›®å‰ä¸ºæ­¢,Edgeæœ‰ä¸¤ä¸ªåˆ†æ”¯åœ¨åŒæ—¶æ›´æ–°:æ—§ç‰ˆä»¥åŠ <code>beta</code> ç‰ˆ,åè€…çš„å†…æ ¸å°±æ˜¯ <code>chromium</code>, è¿™é‡Œæ˜¯<a href="https://developer.microsoft.com/en-us/microsoft-edge/platform/status/shadowdom/">æ›´æ–°çŠ¶æ€</a>.
</p>

<p>
åœ¨è¿™ä¸ªæ—¶ä»£ä¸‹,ç»„ä»¶åŒ–ä¹Ÿè¿æ¥äº†å®ƒçš„æ ‡å‡†.
</p>

</div>

<div id="outline-container-org3222477" class="outline-2">
<h2 id="org3222477">WEBç»„ä»¶è¯ç”Ÿçš„ç›®çš„</h2>
<div class="outline-text-2" id="text-org3222477">
<p>
ä¼ ç»ŸWEBå‰ç«¯å¼€å‘çš„ä¸€å¤§é—®é¢˜: ç¼ºå°‘ä»£ç å¤ç”¨.
</p>

<p>
è€Œ <code>Web Components</code> å°±æ˜¯å‡ºäºè§£å†³è¿™ä¸ªé—®é¢˜ä¸ºç›®çš„è€Œè¯ç”Ÿçš„,åŒæ—¶ä¹Ÿæ˜¯ä½œä¸ºä¸€ä¸ªæ ‡å‡†çš„ç»„ä»¶åŒ–æ‰‹æ®µè€Œè¯ç”Ÿçš„.
</p>
</div>
</div>


<div id="outline-container-org177967a" class="outline-2">
<h2 id="org177967a">ä¸ç¬¬ä¸‰æ–¹æ¡†æ¶(Angular/React/Vue)ç›¸æ¯”</h2>
<div class="outline-text-2" id="text-org177967a">
<p>
ä¼˜ç‚¹: æ— ä»»ä½•ä¾èµ–,åŸç”Ÿ,ä»£ç é‡å°‘,æ›´ä½çš„å­¦ä¹ æˆæœ¬(æ²¡æœ‰ç¬¬ä¸‰æ–¹æ¡†æ¶çš„ä¸€äº›æŠ½è±¡æ¦‚å¿µä»¥åŠä¸€å¤§å †å·¥å…·)/æ›´åŠ ç›´è§‚
</p>

<p>
ç¼ºç‚¹: å…¼å®¹é—®é¢˜,æ²¡æœ‰ <code>MVVM</code> è¿™ç§æŠ½è±¡æ¦‚å¿µ,ç›¸æ¯”ä¸‹æ›´å°‘ä¾¿åˆ©åŠŸèƒ½,æ— éœ€æ“ä½œDOM
</p>
</div>
</div>


<div id="outline-container-org3ea511d" class="outline-2">
<h2 id="org3ea511d">WEBç»„ä»¶ç®€å•ä»‹ç»</h2>
<div class="outline-text-2" id="text-org3ea511d">
<p>
WEBç»„ä»¶æ˜¯ä¸€å¥— <code>EcmaScript API</code>,åˆ†ä¸ºä¸‰å¤§éƒ¨åˆ†:
</p>

<ol class="org-ol">
<li>è‡ªå®šä¹‰å…ƒç´  (Custom Elements)</li>
<li>Shadow DOM</li>
<li>HTMLæ¨¡æ¿ (HTML templates)</li>
</ol>


<p>
å®ç°ä¸€ä¸ªWEBç»„ä»¶çš„æ•´ä½“æµç¨‹å¦‚ä¸‹:
</p>

<ol class="org-ol">
<li>åˆ›å»ºä¸€ä¸ªç±»(ECMAScript 2015çš„è¯­æ³•è§„èŒƒ)æˆ–è€…å‡½æ•°æ¥æŒ‡å®šç»„ä»¶çš„åŠŸèƒ½</li>
<li>åˆ©ç”¨ <code>CustomElementRegistry.define(cusElName, class/function[, inheritedEl])</code> å¯¹å®šä¹‰çš„ç»„ä»¶è¿›è¡Œæ³¨å†Œ</li>
<li>å¦‚æœæœ‰ç”¨åˆ° <code>Shadow DOM</code> çš„è¯,éœ€è¦ä½¿ç”¨ <code>Element.attachShadow({ mode: 'open'/'closed' })</code> åˆ›å»ºä¸€ä¸ª <code>ShadowRoot</code>,
ç„¶ååƒæ­£å¸¸æ“ä½œ <code>DOM</code> é‚£æ ·å¯¹è¿™ä¸ª <code>ShadowRoot</code> è¿›è¡Œäº‹ä»¶ç›‘å¬,æ·»åŠ å­å…ƒç´ ç­‰æ“ä½œ.</li>
<li>å¦‚æœæœ‰å¿…è¦,å¯ä»¥ä½¿ç”¨ <code>&lt;template&gt;</code> ä»¥åŠ <code>slot</code> æ¥å®šä¹‰ <code>HTML</code> æ¨¡æ¿,ç„¶ååƒæ­£å¸¸æ“ä½œ <code>DOM</code> é‚£æ ·æŠŠæ¨¡æ¿ <code>clone</code> åˆ° <code>ShadowRoot</code> ä¸Š.</li>
<li>åœ¨é¡µé¢ä¸ŠåƒåŸç”Ÿå…ƒç´ é‚£æ ·ä½¿ç”¨è‡ªå®šä¹‰å…ƒç´ .</li>
</ol>
</div>
</div>


<div id="outline-container-orga611344" class="outline-2">
<h2 id="orga611344">ä¸€ä¸ªç®€å•çš„ä¾‹å­</h2>
<div class="outline-text-2" id="text-orga611344">
<p>
å®Œå…¨å‚ç…§ä¸Šä¸€å°èŠ‚çš„æµç¨‹,
</p>

<p>
é¦–å…ˆ,é¡µé¢å¦‚ä¸‹:
</p>

<div class="org-src-container">
<pre class="src src-html">&lt;<span style="color: #93E0E3;">html</span>&gt;
    &lt;<span style="color: #93E0E3;">head</span>&gt;
        &lt;<span style="color: #93E0E3;">meta</span> <span style="color: #DFAF8F;">charset</span>=<span style="color: #CC9393;">"utf-8"</span>&gt;
    &lt;/<span style="color: #93E0E3;">head</span>&gt;
    &lt;<span style="color: #93E0E3;">body</span>&gt;
        &lt;<span style="color: #93E0E3;">cus-input</span>&gt;&lt;/<span style="color: #93E0E3;">cus-input</span>&gt;
        &lt;<span style="color: #93E0E3;">script</span> <span style="color: #DFAF8F;">src</span>=<span style="color: #CC9393;">"webcomponent.js"</span>&gt;&lt;/<span style="color: #93E0E3;">script</span>&gt;
    &lt;/<span style="color: #93E0E3;">body</span>&gt;
&lt;/<span style="color: #93E0E3;">html</span>&gt;
</pre>
</div>


<ul class="org-ul">
<li><p>
<b>Step 1</b>
</p>

<p>
è‡ªå®šä¹‰çš„ç»„ä»¶ <code>&lt;cus-input&gt;</code>,
</p>

<div class="org-src-container">
<pre class="src src-javascript"><span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">webcomponent.js</span>
<span style="color: #F0DFAF; font-weight: bold;">class</span> CusInput <span style="color: #F0DFAF; font-weight: bold;">extends</span> HTMLElement {
    constructor() {
        <span style="color: #F0DFAF; font-weight: bold;">super</span>();
        console.log(<span style="color: #CC9393;">"I am showing how hard I'm working !!!"</span>);
        <span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">&#36825;&#26159;&#20026;&#20102;&#21306;&#20998;&#32452;&#20214;&#26159;&#21542;&#32463;&#36807;&#23450;&#20041;&#20197;&#21450;&#27880;&#20876;,&#22240;&#20026;DOM tree &#36824;&#26159;&#20250;&#26377;&#27809;&#26377;&#32463;&#36807;&#23450;&#20041;&#20197;&#21450;&#27880;&#20876;&#20803;&#32032;</span>
    }
}

</pre>
</div></li>

<li><p>
<b>Step 2</b>
</p>

<p>
æ³¨å†Œè‡ªå®šä¹‰ç»„ä»¶, <code>customElements</code> æ˜¯ <code>CustomElementRegistry</code> çš„ä¸€ä¸ªå†…ç½®å®ä¾‹,
</p>

<div class="org-src-container">
<pre class="src src-javascript"><span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">webcomponent.js(cont)</span>
customElements.define(<span style="color: #CC9393;">'cus-input'</span>, CusInput);
</pre>
</div>

<p>
éœ€è¦æ³¨æ„çš„ä¸€ç‚¹æ˜¯: è‡ªå®šä¹‰å…ƒç´ çš„åå­—å¿…é¡»åŒ…å«ä¸€ä¸ª <code>-(hyphen)</code>.å¯¹äºè‡ªå®šä¹‰å…ƒç´ æ¥è¯´,åªè¦åå­—åˆæ³•,è¿™ç§å…ƒç´ å°±èƒ½é€šè¿‡æµè§ˆå™¨çš„è§£é‡Š.
</p>

<p>
å“ªæ€•æ²¡æœ‰ç»è¿‡å®šä¹‰ä»¥åŠæ³¨å†Œ,ä¹Ÿæ˜¯è¢«æµè§ˆå™¨æ‰¿è®¤çš„,å¹¶ä¸”å®ƒä»¬å®ç°çš„æ˜¯ <code>HTMLElement</code> çš„æ¥å£.æˆ–è€…åè¿‡æ¥è¯´,åªè¦åå­—ç¬¦åˆè¿™ç§è§„èŒƒçš„éƒ½æ˜¯è‡ªå®šä¹‰å…ƒç´ .
</p>

<p>
é™¤æ­¤ä»¥å¤–çš„å°±æ˜¯ <code>HTML</code> å¯¹è±¡çš„ç¬¬ä¸‰ç±»: <code>HTMLUnknownElement</code>,ä¸å®ƒçš„åå­—æ„æ€ä¸ä¸€æ ·,å®ƒä»£è¡¨äº†æ‰€æœ‰ä¸åˆæ³•çš„å…ƒç´ ,
</p>

<p>
æ¯”å¦‚ <code>&lt;hello&gt;</code> è¿™ç§æ—¢éå†…ç½®å…ƒç´ ä¹Ÿéè‡ªå®šä¹‰å…ƒç´ .
</p>

<p>
ç»“è®ºå°±æ˜¯è‡ªå®šä¹‰å…ƒç´ å’Œ <code>HTMLUnknownElement</code> æ²¡æœ‰ä»»ä½•äº¤é›†,ä¸èƒ½ç®€å•é€šè¿‡åˆ¤æ–­å…ƒç´ æ˜¯å¦ <code>HTMLUnknownElement</code> çš„å®ä¾‹æ¥æ–­å®šè¿™ä¸ªå…ƒç´ æ˜¯ä¸æ˜¯è‡ªå®šä¹‰å…ƒç´ .
</p>

<p>
(çœ‹åå­—å°±å¾—äº†).
</p>

<div class="org-src-container">
<pre class="src src-javascript">document.querySelector(<span style="color: #CC9393;">'cus-input'</span>) <span style="color: #F0DFAF; font-weight: bold;">instanceof</span> <span style="color: #7CB8BB;">HTMLUnknownElement</span>; <span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">false</span>
document.querySelector(<span style="color: #CC9393;">'cus-input'</span>) <span style="color: #F0DFAF; font-weight: bold;">instanceof</span> <span style="color: #7CB8BB;">HTMLElement</span>; <span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">true</span>
document.querySelector(<span style="color: #CC9393;">'undefined-el'</span>) <span style="color: #F0DFAF; font-weight: bold;">instanceof</span> <span style="color: #7CB8BB;">HTMLUnknownElement</span>; <span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">false</span>
document.querySelector(<span style="color: #CC9393;">'undefined-el'</span>) <span style="color: #F0DFAF; font-weight: bold;">instanceof</span> <span style="color: #7CB8BB;">HTMLElement</span>; <span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">true</span>
document.querySelector(<span style="color: #CC9393;">'hello'</span>) <span style="color: #F0DFAF; font-weight: bold;">instanceof</span> <span style="color: #7CB8BB;">HTMLUnknownElement</span>; <span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">true</span>
document.querySelector(<span style="color: #CC9393;">'hello'</span>) <span style="color: #F0DFAF; font-weight: bold;">instanceof</span> <span style="color: #7CB8BB;">HTMLElement</span>; <span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">false</span>
</pre>
</div></li>

<li><p>
<b>Step 3</b>
</p>

<p>
<code>&lt;cus-input&gt;</code> æ˜¯ä¸€ä¸ªç©ºç»„ä»¶,é‡Œé¢ä»€ä¹ˆå†…å®¹ä¹Ÿæ²¡æœ‰,
</p>

<p>
ç°åœ¨è¦æ±‚æ˜¯è¿™æ ·: <code>&lt;cus-input&gt;</code> ç”± <code>&lt;input&gt;</code> å…ƒç´ ä»¥åŠ <code>&lt;button&gt;</code> ç»„æˆ,å¹¶ä¸”æ”¯æŒ <code>placeholder</code> ä»¥åŠ <code>btntext</code> ä¸¤ä¸ªå±æ€§.
</p>

<p>
æœ‰ä¸¤ç§å®ç°æ–¹æ³•: æ“ä½œ <code>DOM</code> å’Œæ“ä½œ <code>Shadow DOM</code>.
</p>

<ol class="org-ol">
<li><p>
æ“ä½œ <code>DOM</code>
</p>

<div class="org-src-container">
<pre class="src src-javascript"><span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">webcomponent.js</span>
<span style="color: #F0DFAF; font-weight: bold;">class</span> CusInput <span style="color: #F0DFAF; font-weight: bold;">extends</span> HTMLElement {

    constructor() {
        <span style="color: #F0DFAF; font-weight: bold;">super</span>();
        console.log(<span style="color: #CC9393;">"I am showing how hard I'm working !!!"</span>);

        <span style="color: #F0DFAF; font-weight: bold;">var</span> <span style="color: #DFAF8F;">placeholder</span> = <span style="color: #BFEBBF;">this</span>.getAttribute(<span style="color: #CC9393;">'placeholder'</span>),
            btnText = <span style="color: #BFEBBF;">this</span>.getAttribute(<span style="color: #CC9393;">'btntext'</span>);

        <span style="color: #F0DFAF; font-weight: bold;">var</span> <span style="color: #DFAF8F;">input</span> = document.createElement(<span style="color: #CC9393;">'input'</span>),
            button = document.createElement(<span style="color: #CC9393;">'button'</span>);

        input.classList.add(<span style="color: #CC9393;">'input'</span>);
        input.type = <span style="color: #CC9393;">'text'</span>;
        <span style="color: #F0DFAF; font-weight: bold;">if</span> (placeholder) {
            input.placeholder = placeholder;
            console.log(placeholder);
        }

        button.classList.add(<span style="color: #CC9393;">'button'</span>);
        <span style="color: #F0DFAF; font-weight: bold;">if</span> (btnText) {
            button.innerText = btnText;
            console.log(btnText);
        }

        <span style="color: #BFEBBF;">this</span>.setAttribute(<span style="color: #CC9393;">'style'</span>, <span style="color: #CC9393;">'display:block'</span>);
        <span style="color: #BFEBBF;">this</span>.append(input);
        <span style="color: #BFEBBF;">this</span>.append(button);
    }
}
</pre>
</div>

<p>
è¿™ç§æ–¹æ³•æœ‰ä¸ªé—®é¢˜:å¯ä»¥é€šè¿‡ <code>DOM API</code> æ¥æ“ä½œé‡Œé¢çš„ <code>&lt;input&gt;</code> å’Œ <code>&lt;button&gt;</code>,è€Œ <code>Shadow DOM</code> å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜.
</p></li>

<li><p>
æ“ä½œ <code>Shadow DOM</code>
</p>

<p>
å…³äº <code>Shadow DOM</code> çš„ä»‹ç»å¯ä»¥é˜…è¯»<a href="https://developer.mozilla.org/en-US/docs/Web/Web_Components/Using_shadow_DOM">è¿™é‡Œ</a>.
</p>

<div class="org-src-container">
<pre class="src src-javascript"><span style="color: #F0DFAF; font-weight: bold;">class</span> CusInput <span style="color: #F0DFAF; font-weight: bold;">extends</span> HTMLElement {

    constructor() {
        <span style="color: #F0DFAF; font-weight: bold;">super</span>();
        console.log(<span style="color: #CC9393;">"I am showing how hard I'm working !!!"</span>);

        <span style="color: #F0DFAF; font-weight: bold;">const</span> <span style="color: #DFAF8F;">_shadowRoot</span> = <span style="color: #BFEBBF;">this</span>.attachShadow({ mode: <span style="color: #CC9393;">'closed'</span> });

        <span style="color: #F0DFAF; font-weight: bold;">var</span> <span style="color: #DFAF8F;">placeholder</span> = <span style="color: #BFEBBF;">this</span>.getAttribute(<span style="color: #CC9393;">'placeholder'</span>),
            btnText = <span style="color: #BFEBBF;">this</span>.getAttribute(<span style="color: #CC9393;">'btntext'</span>);

        <span style="color: #F0DFAF; font-weight: bold;">var</span> <span style="color: #DFAF8F;">input</span> = document.createElement(<span style="color: #CC9393;">'input'</span>),
            button = document.createElement(<span style="color: #CC9393;">'button'</span>);

        input.classList.add(<span style="color: #CC9393;">'input'</span>);
        input.type = <span style="color: #CC9393;">'text'</span>;
        <span style="color: #F0DFAF; font-weight: bold;">if</span> (placeholder) {
            input.placeholder = placeholder;
            console.log(placeholder);
        }

        button.classList.add(<span style="color: #CC9393;">'button'</span>);
        <span style="color: #F0DFAF; font-weight: bold;">if</span> (btnText) {
            button.innerText = btnText;
            console.log(btnText);
        }

        _shadowRoot.appendChild(input);
        _shadowRoot.appendChild(button);
    }
}
</pre>
</div>

<p>
å½“ <code>Element.attachShadow</code> çš„ <code>mode</code> ä¸º <code>'open'</code> æ¨¡å¼çš„æ—¶å€™å¯ä»¥é€šè¿‡ <code>document.querySelector('cus-input').shadowRoot</code> è®¿é—®é‡Œé¢çš„å…ƒç´ ,
</p>

<p>
ä½ å¯ä»¥åƒè¿™æ ·æ¥æ“ä½œé‡Œé¢çš„å…ƒç´  <code>document.querySelector('cus-input').shadowRoot.querySelector('input')</code>.
</p>

<p>
ä½†æ˜¯æš´éœ²å‡ºå»ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„,æ‰€ä»¥å°±ç”¨ <code>closed</code>,è¿™æ · <code>document.querySelector('cus-input').shadowRoot</code> å¾—åˆ°çš„å€¼å°±ä¸º <code>null</code>.
</p>

<p>
è‡ªå¸¦çš„ <code>&lt;video&gt;</code> å…ƒç´ å°±ä½¿ç”¨äº† <code>Shadow DOM</code>,æ‰€ä»¥è¯´å…¶å® <code>Shadow DOM</code> å¹¶ä¸æ˜¯ä»€ä¹ˆæ–°é²œäº‹ç‰©.
</p>

<p>
ä¸è¿‡å“ªä¸€ç§æ¨¡å¼ä¸‹,éƒ½æ˜¯ä¸èƒ½é€šè¿‡ <code>document</code> å¯¹è±¡ä½¿ç”¨ <code>DOM API</code> è·å–ä»¥åŠæ“ä½œ <code>ShadowRoot</code> é‡Œé¢çš„å†…å®¹.
</p>

<p>
ç°åœ¨å¯ä»¥ç»™ç»„ä»¶ä¼ é€’å±æ€§å¹¶ä¸”ä¸ç”¨æ‹…å¿ƒå—åˆ°å¤–ç•Œçš„å½±å“äº†.ç›®å‰è¿™ä¸ªé˜¶æ®µå¯ä»¥è¯´æ˜¯å®Œæˆäº†ä¸€ä¸ªå®Œæ•´çš„ <code>WEB</code> ç»„ä»¶äº†.å½“æ˜¯è¿˜æœ‰å¾—ä¼˜åŒ–.
</p></li>
</ol></li>

<li><p>
<b>Step 4</b>
</p>

<p>
ç›®å‰çš„ç»„ä»¶è¿˜æ˜¯ç›¸å¯¹æ¯”è¾ƒç®€å•çš„,ä½†å¦‚æœç»„ä»¶æ¯”è¾ƒå¤å°±å»ºè®®ä½¿ç”¨ <code>&lt;template&gt;</code> ä»¥åŠ <code>&lt;slot&gt;</code>,å½“ç„¶ç°åœ¨è¿˜æ˜¯ç”¨è¿™ä¸ªç®€å•çš„ <code>&lt;cus-input&gt;</code> æ¥ä½œä¸ºä¾‹å­.
</p>

<p>
<code>&lt;template&gt;</code> æ˜¯ä¸€ä¸ªæŒæœ‰ <code>HTML</code> å†…å®¹(style,htmlå…ƒç´ ,ç”šè‡³script)çš„å…ƒç´ ,è¿™ä¸ªå…ƒç´ ç±»ä¼¼äº <code>&lt;script&gt;</code> è¿™ç§å…ƒç´ ä¸€æ ·é»˜è®¤æ ·å¼ä¸º <code>display:none</code>,å®ƒçš„ç›®çš„æ˜¯ç”¨äºåç»­æ¸²æŸ“,
</p>

<p>
å®ƒçš„å¯¹è±¡éµå®ˆ <code>HTMLTemplateElement</code> çš„æ¥å£è®¾è®¡,è¿™ç§å’Œå…¶å®ƒ <code>HTML</code> å…ƒç´ å¯¹è±¡æœ‰ä¸€ä¸ªå·®åˆ«: æœ‰ä¸€ä¸ªç‰¹æœ‰çš„ <code>read-only content</code> å±æ€§,
</p>

<p>
å®ƒçš„å€¼å°±æ˜¯ä¸€ä¸ª <code>DOM subtree</code>.
</p>

<p>
è€Œ <code>&lt;slot&gt;</code> è¿™æ˜¯ä¸€ä¸ªå ä½ç¬¦(placeholder),å¯ä»¥ç”¨äºåç»­å¡«å……æƒ³è¦çš„ <code>HTML</code> å†…å®¹,æ˜¯ <code>&lt;template&gt;</code> çš„å¥½å…„å¼Ÿ;è¿™ä¸ªå…ƒç´ æœ‰ä¸€ä¸ª <code>name</code> å±æ€§ä½œä¸ºæ ‡è¯†,
</p>

<p>
<code>HTML</code> å…ƒç´ æœ‰ä¸€ä¸ª <code>slot</code> å…¨å±€å±æ€§,è¯¥å±æ€§çš„å€¼å°±æ˜¯ <code>&lt;slot&gt;</code> çš„æ ‡è¯†,æŒ‡å®šè¿™ä¸ªå€¼æ„å‘³ç€è¯¥å…ƒç´ è¢«ç”¨äº"æ›¿æ¢"åˆ°å¯¹åº”çš„ <code>&lt;slot&gt;</code>.
</p>

<p>
å…ˆä»ç®€å•çš„å¼€å§‹ - æ”¹ç”¨ <code>&lt;template&gt;</code>,
</p>

<ol class="org-ol">
<li><p>
é¦–å…ˆæ”¹å†™é¡µé¢æ–‡ä»¶
</p>

<div class="org-src-container">
<pre class="src src-html">&lt;<span style="color: #93E0E3;">html</span>&gt;
    &lt;<span style="color: #93E0E3;">head</span>&gt;
        &lt;<span style="color: #93E0E3;">meta</span> <span style="color: #DFAF8F;">charset</span>=<span style="color: #CC9393;">"utf-8"</span>&gt;
    &lt;/<span style="color: #93E0E3;">head</span>&gt;
    &lt;<span style="color: #93E0E3;">body</span>&gt;
        &lt;<span style="color: #93E0E3;">template</span> <span style="color: #DFAF8F;">id</span>=<span style="color: #CC9393;">"cus-input-tpl"</span>&gt;
            &lt;<span style="color: #93E0E3;">input</span> <span style="color: #DFAF8F;">class</span>=<span style="color: #CC9393;">"input"</span> <span style="color: #DFAF8F;">type</span>=<span style="color: #CC9393;">"text"</span> /&gt;
            &lt;<span style="color: #93E0E3;">button</span> <span style="color: #DFAF8F;">class</span>=<span style="color: #CC9393;">"button"</span>&gt;&lt;/<span style="color: #93E0E3;">button</span>&gt;
        &lt;/<span style="color: #93E0E3;">template</span>&gt;
        &lt;<span style="color: #93E0E3;">cus-input</span> <span style="color: #DFAF8F;">placeholder</span>=<span style="color: #CC9393;">"&#35831;&#36755;&#20837;&#20869;&#23481;"</span> <span style="color: #DFAF8F;">btntext</span>=<span style="color: #CC9393;">"&#25552;&#20132;"</span>&gt;&lt;/<span style="color: #93E0E3;">cus-input</span>&gt;
       &lt;<span style="color: #93E0E3;">script</span> <span style="color: #DFAF8F;">src</span>=<span style="color: #CC9393;">"webcomponent.js"</span>&gt;&lt;/<span style="color: #93E0E3;">script</span>&gt;
    &lt;/<span style="color: #93E0E3;">body</span>&gt;
&lt;/<span style="color: #93E0E3;">html</span>&gt;
</pre>
</div></li>

<li><p>
ç„¶åæŠŠæ¨¡æ¿å†…å®¹æ·»åŠ åˆ° <code>ShadowRoot</code> ä¸‹,é€šè¿‡ <code>ShadowRoot</code> æ¥å¯¹æ¨¡æ¿ä¸Šçš„å†…å®¹è¿›è¡Œæ“ä½œ,
</p>

<div class="org-src-container">
<pre class="src src-javascript"><span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">webcomponent.js</span>
<span style="color: #F0DFAF; font-weight: bold;">class</span> CusInput <span style="color: #F0DFAF; font-weight: bold;">extends</span> HTMLElement {

    constructor() {
        <span style="color: #F0DFAF; font-weight: bold;">super</span>();
        console.log(<span style="color: #CC9393;">"I am showing how hard I'm working !!!"</span>);

        <span style="color: #F0DFAF; font-weight: bold;">const</span> <span style="color: #DFAF8F;">tpl</span> = document
              .getElementById(<span style="color: #CC9393;">'cus-input-tpl'</span>)
              .content;

        <span style="color: #F0DFAF; font-weight: bold;">const</span> <span style="color: #DFAF8F;">_shadowRoot</span> = <span style="color: #BFEBBF;">this</span>.attachShadow({ mode: <span style="color: #CC9393;">'closed'</span> });

        _shadowRoot.appendChild(tpl.cloneNode(<span style="color: #BFEBBF;">true</span>));

        <span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">point A</span>

        <span style="color: #F0DFAF; font-weight: bold;">var</span> <span style="color: #DFAF8F;">placeholder</span> = <span style="color: #BFEBBF;">this</span>.getAttribute(<span style="color: #CC9393;">'placeholder'</span>),
            btnText = <span style="color: #BFEBBF;">this</span>.getAttribute(<span style="color: #CC9393;">'btntext'</span>);

        <span style="color: #F0DFAF; font-weight: bold;">var</span> <span style="color: #DFAF8F;">input</span> = _shadowRoot.querySelector(<span style="color: #CC9393;">'input'</span>),
            button = _shadowRoot.querySelector(<span style="color: #CC9393;">'button'</span>);
        <span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">point B</span>

        input.classList.add(<span style="color: #CC9393;">'input'</span>);
        input.type = <span style="color: #CC9393;">'text'</span>;
        <span style="color: #F0DFAF; font-weight: bold;">if</span> (placeholder) {
            input.placeholder = placeholder;
            console.log(placeholder);
        }

        button.classList.add(<span style="color: #CC9393;">'button'</span>);
        <span style="color: #F0DFAF; font-weight: bold;">if</span> (btnText) {
            button.innerText = btnText;
            console.log(btnText);
        }
    }
}

<span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">cont ...</span>
</pre>
</div>

<p>
è¿™é‡Œæœ‰ä¸¤ä¸ªé‡ç‚¹,
</p>

<ul class="org-ul">
<li>A. <code>&lt;template&gt;</code> å¯¹è±¡çš„ <code>content</code> å±æ€§æ˜¯ <code>read-only</code> çš„,å½“æ˜¯ä¸ä»£è¡¨ <code>content</code> æŒ‡å‘çš„å†…å®¹ä¸èƒ½æ”¹å˜,
è¿™æ˜¯ä¸€ä¸ªç±»ä¼¼äº <code>C</code> è¯­è¨€é‡Œé¢å…¸å‹çš„æŒ‡é’ˆå˜é‡æ˜¯ <code>const</code> çš„é—®é¢˜,è¿™ä¸ªå˜é‡æŒ‡å‘çš„å†…å®¹åœ°å€ä¸å¯æ”¹å˜,ä½†è¯¥åœ°å€ä¸Šçš„å†…å®¹å¹¶éä¸å¯æ”¹å˜.
æ‰€ä»¥ä¸ºäº†é˜²æ­¢å‘ç”Ÿæ„å¤–æ”¹å˜äº†æ¨¡æ¿å†…å®¹,éœ€è¦ä½¿ç”¨ <code>Node.cloneNode()</code> è¿›è¡Œæ·±æ‹·è´(å¦‚æœä½ çš„ <code>&lt;template&gt;</code> éœ€è¦åœ¨å…¶å®ƒåœ°æ–¹ä½¿ç”¨çš„è¯).</li>

<li>B. å› ä¸ºç»„ä»¶é‡Œé¢çš„ <code>input</code> å’Œ <code>button</code> éƒ½ä¸æ˜¯æˆ‘ä»¬æ‰‹åŠ¨åˆ›å»ºçš„,æ‰€ä»¥è¦å¯¹å®ƒä»¬è¿›è¡Œæ“ä½œåªèƒ½é€šè¿‡ <code>_shadowRoot</code> è·å–è¿›è¡Œä¿®æ”¹.</li>

<li>C. (4å¤§å¤©ç‹æœ‰5ä¸ªäººæ˜¯å¸¸è¯†,æ‰€ä»¥ä¸¤ä¸ªé‡ç‚¹æœ‰ä¸‰ä¸ªä¹Ÿæ²¡ä»€ä¹ˆé—®é¢˜),é™¤äº† <code>HTML</code> å¤–, åˆ«å¿˜äº† <code>&lt;template&gt;</code> ä¹Ÿå¯ä»¥æŠŠ <code>css</code> å’Œ <code>js</code> åŒ…å«è¿›å»,è¿™é‡Œå°±ä¸å±•ç¤ºäº†.</li>
</ul></li>

<li><p>
æ‹“å±•(éœ€æ±‚å˜æ›´): è¦æ±‚ç”¨æˆ·å¯ä»¥è‡ªå·±æä¾›ä¸€ä¸ªæ¸…é™¤æŒ‰é’®.
</p>

<p>
è¿™ä¸ªå¬ä¸Šå»å¾ˆéº»çƒ¦,å®é™…ä¸Šåªéœ€è¦æ·»åŠ ä¸€å¥ä»£ç å°±ææ‚äº†.
</p>

<div class="org-src-container">
<pre class="src src-html">&lt;<span style="color: #93E0E3;">html</span>&gt;
    &lt;<span style="color: #93E0E3;">head</span>&gt;
        &lt;<span style="color: #93E0E3;">meta</span> <span style="color: #DFAF8F;">charset</span>=<span style="color: #CC9393;">"utf-8"</span>&gt;
    &lt;/<span style="color: #93E0E3;">head</span>&gt;
    &lt;<span style="color: #93E0E3;">body</span>&gt;
        &lt;<span style="color: #93E0E3;">template</span> <span style="color: #DFAF8F;">id</span>=<span style="color: #CC9393;">"cus-input-tpl"</span>&gt;
            &lt;<span style="color: #93E0E3;">input</span> <span style="color: #DFAF8F;">class</span>=<span style="color: #CC9393;">"input"</span> <span style="color: #DFAF8F;">type</span>=<span style="color: #CC9393;">"text"</span> /&gt;
            &lt;<span style="color: #93E0E3;">button</span> <span style="color: #DFAF8F;">class</span>=<span style="color: #CC9393;">"button"</span>&gt;&lt;/<span style="color: #93E0E3;">button</span>&gt;
            &lt;<span style="color: #93E0E3;">slot</span> <span style="color: #DFAF8F;">name</span>=<span style="color: #CC9393;">"btnClear"</span>&gt;&lt;/<span style="color: #93E0E3;">slot</span>&gt;
            <span style="color: #5F7F5F;">&lt;!-- </span><span style="color: #7F9F7F;">&#20351;&#29992;slot </span><span style="color: #5F7F5F;">--&gt;</span>
        &lt;/<span style="color: #93E0E3;">template</span>&gt;

        <span style="color: #5F7F5F;">&lt;!-- </span><span style="color: #7F9F7F;">&#29992;&#27861;&#23637;&#31034; </span><span style="color: #5F7F5F;">--&gt;</span>
        &lt;<span style="color: #93E0E3;">cus-input</span> <span style="color: #DFAF8F;">placeholder</span>=<span style="color: #CC9393;">"&#35831;&#36755;&#20837;&#20869;&#23481;"</span> <span style="color: #DFAF8F;">btntext</span>=<span style="color: #CC9393;">"&#25552;&#20132;"</span>&gt;
            &lt;<span style="color: #93E0E3;">button</span> <span style="color: #DFAF8F;">slot</span>=<span style="color: #CC9393;">"btnClear"</span>&gt;&#28165;&#38500;&lt;/<span style="color: #93E0E3;">button</span>&gt;
            <span style="color: #5F7F5F;">&lt;!-- </span><span style="color: #7F9F7F;">&#22312;&#36825;&#37324;&#25554;&#20837;&#25351;&#23450;&#20102;slot&#23646;&#24615;&#30340;&#20803;&#32032; </span><span style="color: #5F7F5F;">--&gt;</span>
        &lt;/<span style="color: #93E0E3;">cus-input</span>&gt;
        &lt;<span style="color: #93E0E3;">script</span> <span style="color: #DFAF8F;">src</span>=<span style="color: #CC9393;">"webcomponent.js"</span>&gt;&lt;/<span style="color: #93E0E3;">script</span>&gt;
    &lt;/<span style="color: #93E0E3;">body</span>&gt;
&lt;/<span style="color: #93E0E3;">html</span>&gt;
</pre>
</div>

<p>
è¿™é‡Œéœ€è¦æ³¨æ„ä¸€ä¸‹,"æ¸…é™¤"æŒ‰é’®æ˜¯å¯ä»¥é€šè¿‡ <code>document.querySelector()</code> æ¥è·å–åˆ°çš„,ä¹Ÿå°±æ˜¯è¯´æ–°æ’å…¥çš„å†…å®¹ä¸ä¼šè¢«å°é—­åˆ°ç»„ä»¶é‡Œé¢,
å¾ˆå¥½çš„ä¸ç»„ä»¶ç»†èŠ‚éš”ç¦»å¼€.ä½ å¯ä»¥å¯¹å®ƒè¿›è¡Œæ ·å¼åŒ–ä»¥åŠå„ç§ <code>DOM</code> æ“ä½œ.
</p></li>

<li><p>
æŠŠç»„ä»¶å°è£…æˆå•ç‹¬ä¸€ä¸ªæ–‡ä»¶å®ç°å¤ç”¨
</p>

<p>
ç›®å‰ä¸ºæ­¢ç»„ä»¶è„±ç¦»ä¸äº†é¡µé¢æ–‡ä»¶ä¸Šçš„ <code>&lt;template&gt;</code>,æ‰€ä»¥ç°åœ¨çš„ç»„ä»¶è¿˜æ˜¯ä¸èƒ½å¤ç”¨,å…¶å®è¿™ä¸ªä¹Ÿå¥½è§£å†³,é€šè¿‡ç¼–ç¨‹åˆ›å»º <code>&lt;template&gt;</code> å°±å¥½äº†.
</p>

<div class="org-src-container">
<pre class="src src-javascript"><span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">webcomponent.js</span>
<span style="color: #F0DFAF; font-weight: bold;">class</span> CusInput <span style="color: #F0DFAF; font-weight: bold;">extends</span> HTMLElement {

    constructor() {

        <span style="color: #F0DFAF; font-weight: bold;">super</span>();

        console.log(<span style="color: #CC9393;">"I am showing how hard I'm working !!!"</span>);

        <span style="color: #F0DFAF; font-weight: bold;">const</span> <span style="color: #DFAF8F;">template</span> = document.createElement(<span style="color: #CC9393;">'template'</span>);

        template.innerHTML = <span style="color: #CC9393;">`</span>
<span style="color: #CC9393;">            &lt;input class="input" type="text" /&gt;</span>
<span style="color: #CC9393;">            &lt;button class="button"&gt;&lt;/button&gt;</span>
<span style="color: #CC9393;">            &lt;slot name="btnClear"&gt;&lt;/slot&gt; &lt;!-- &#20351;&#29992;slot --&gt;`</span>;

        <span style="color: #F0DFAF; font-weight: bold;">const</span> <span style="color: #DFAF8F;">tpl</span> = template.content;

        <span style="color: #F0DFAF; font-weight: bold;">const</span> <span style="color: #DFAF8F;">_shadowRoot</span> = <span style="color: #BFEBBF;">this</span>.attachShadow({ mode: <span style="color: #CC9393;">'closed'</span> });

        _shadowRoot.appendChild(tpl.cloneNode(<span style="color: #BFEBBF;">true</span>));

        <span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">things done before ...</span>
    }
}

customElements.define(<span style="color: #CC9393;">'cus-input'</span>, CusInput);
</pre>
</div>

<p>
è¿™æ ·ä¸€æ¥,ä¸€ä¸ªå¯å¤ç”¨çš„ç»„ä»¶ <code>&lt;cus-input&gt;</code> å°±è¯ç”Ÿäº†.
</p></li>
</ol></li>

<li><p>
<b>Step 5</b>
</p>

<p>
ç°åœ¨ä½ å¯ä»¥åœ¨ä»»ä½•ä¸€ä¸ªé¡µé¢çš„ä»»ä½•åœ°æ–¹ä½¿ç”¨è¿™ä¸ªæ²¡æœ‰ä»»ä½•ä¾èµ–çš„åŸç”Ÿç»„ä»¶ <code>&lt;cus-input&gt;</code> äº†.
</p></li>
</ul>
</div>
</div>


<div id="outline-container-org918ba43" class="outline-2">
<h2 id="org918ba43">æ›´åŠ é«˜çº§çš„å†…å®¹</h2>
<div class="outline-text-2" id="text-org918ba43">
<ol class="org-ol">
<li><p>
æ‹“å±•ç°æœ‰å…ƒç´ 
</p>

<p>
è¿™é‡Œé€šè¿‡æ‹“å±• <code>&lt;p&gt;</code> å…ƒç´ ä»¥åŠä½¿ç”¨ä¸€ä¸ª <code>is</code> å±æ€§æ¥å¯¹ç°æœ‰ <code>&lt;p&gt;</code> ä½œå¢å¼º:
</p>

<p>
<a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Global_attributes/is">https://developer.mozilla.org/en-US/docs/Web/HTML/Global_attributes/is</a>.
</p></li>

<li>ç‰¹æœ‰çš„CSSä¼ªç±»å’Œä¼ªå…ƒç´ </li>

<li><p>
å®ç°MVVM
</p>

<p>
<code>MVVM</code> çš„æœ¬è´¨æ˜¯ <code>Publisher/Subscriber</code> æ¨¡å¼,ç®€å•ç‚¹è¯´å°±æ˜¯æ›´æ–°çš„åŒæ—¶è§¦å‘å›è°ƒ.
</p>

<p>
<code>MVVM</code> å¹¶ä¸æ˜¯å¾¡ä¸‰å®¶çš„ä¸“å±,å®é™…ä¸Š <code>Web Components</code> ä¹Ÿå¯ä»¥å®ç°åŒå‘ç»‘å®š,è€Œä¸”ååˆ†ç®€å•.
</p>

<ol class="org-ol">
<li><p>
<code>Object.defineProperty()</code>
</p>

<p>
å¯ä»¥ç»™ä¸€ä¸ªå¯¹è±¡è®¾å®šä¸€ä¸ª <code>property</code>,å¹¶ä¸”ç»™è¿™ä¸ª <code>property</code> è®¾å®š <code>setter</code> å’Œ <code>gettter</code>,åœ¨ <code>set</code> è¿™ä¸ª <code>property</code> çš„æ—¶å€™åšæ›´æ–°æ“ä½œ.
</p>

<p>
æ¯”å¦‚åœ¨ <code>set</code> çš„æ—¶å€™è§¦å‘ <code>getter</code>.
</p>

<div class="org-src-container">
<pre class="src src-javascript"><span style="color: #F0DFAF; font-weight: bold;">var</span> <span style="color: #DFAF8F;">obj</span> = <span style="color: #F0DFAF; font-weight: bold;">new</span> <span style="color: #7CB8BB;">Object</span>();

<span style="color: #F0DFAF; font-weight: bold;">function</span> <span style="color: #93E0E3;">callGetterAfterSetter</span>() {
    console.log(<span style="color: #CC9393;">'Calling getter'</span>);
    <span style="color: #F0DFAF; font-weight: bold;">return</span> <span style="color: #BFEBBF;">this</span>.value === <span style="color: #BFEBBF;">undefined</span> ? <span style="color: #CC9393;">'EMPTY'</span> : <span style="color: #BFEBBF;">this</span>.value;
}

Object.defineProperty(
    obj,
    <span style="color: #CC9393;">'key'</span>,
    {
        get() {
            <span style="color: #F0DFAF; font-weight: bold;">return</span> callGetterAfterSetter.call(<span style="color: #BFEBBF;">this</span>);
        },

        set(value) {
            <span style="color: #BFEBBF;">this</span>.value = value;
            callGetterAfterSetter.call(<span style="color: #BFEBBF;">this</span>);
        }
    }
);

obj.key = 2;
</pre>
</div>

<p>
å®é™…ä¸Š,æŠŠ <code>Vue</code> é‡Œé¢çš„ <code>data</code> æ‰“å°å‡ºæ¥ä¹Ÿæ˜¯ä¸€å¤§å † <code>setter</code> å’Œ <code>getter</code>,è‡³äºæ˜¯ä¸æ˜¯ç”¨ <code>Object.defineProperty()</code> å®ç°å°±ä¸æ¸…æ¥šäº†.
</p></li>

<li><p>
<code>Web Components</code> çš„ç”Ÿå‘½å‘¨æœŸ
</p>

<p>
<a href="https://developer.mozilla.org/en-US/docs/Web/Web_Components/Using_custom_elements#Using_the_lifecycle_callbacks">https://developer.mozilla.org/en-US/docs/Web/Web_Components/Using_custom_elements#Using_the_lifecycle_callbacks</a>
</p>

<p>
åˆ©ç”¨ <code>attributeChangedCallback</code> é’©å­å¯ä»¥åšåˆ°åœ¨æŒ‡å®šçš„å±æ€§å‘ç”Ÿæ”¹å˜çš„æ—¶å€™åšå‡ºååº”.
</p></li>
</ol></li>
</ol>
</div>
</div>



<div id="outline-container-org8d06a70" class="outline-2">
<h2 id="org8d06a70">æ›´å¤šå‚è€ƒä¾‹å­</h2>
<div class="outline-text-2" id="text-org8d06a70">
<p>
<code>MDN</code> çš„ä¸€ä¸ª <code>Repo</code> : <a href="https://github.com/mdn/web-components-examples">https://github.com/mdn/web-components-examples</a>.
</p>
</div>
</div>


<div id="outline-container-org7fb8509" class="outline-2">
<h2 id="org7fb8509">ç»“è®º</h2>
<div class="outline-text-2" id="text-org7fb8509">
<p>
å’Œç›®å‰æµè¡Œçš„å¾¡ä¸‰å®¶æ¥æ¯”, <code>Web Components</code> å…¶å®æ²¡é‚£ä¹ˆå¥½ç”¨,å½“æ˜¯ä¼˜ç‚¹è¿˜æ˜¯æ˜æ˜¾çš„,é‚£å°±æ˜¯ç®€å•.å®é™…ä¸Šä¹Ÿæœ‰ä¸å°‘éä¸»æµæ¡†æ¶åŸºäº <code>Web Components</code> å¼€å‘.
</p>

<p>
è€Œå¾®è½¯æ”¶è´­äº† <code>Github</code> åä¹Ÿé‡‡ç”¨äº† <code>Web Components</code> è¿›è¡Œæ”¹å†™,ç›®å‰ <code>Github</code> ä½“éªŒè‰¯å¥½.
</p>

<p>
ä½œä¸ºä¸€ä¸ªå‰ç«¯å¼€å‘è€…å¯ä»¥è¯´æ˜¯ååˆ†å¸Œæœ›è¿™å¥—æ ‡å‡†ç»„ä»¶èƒ½å¤Ÿæµè¡Œ,ä½†æ˜¯å› ä¸º"è€"ç”¨æˆ·çš„å­˜åœ¨ä»¥åŠæŠ€æœ¯ç«äº‰çš„åŸå› å¯¼è‡´è¿™ä¸œè¥¿åœ¨å·¥ä¸šä¸Šä¸å¤ªå®¹æ˜“è¢«æ¥å—,
</p>

<p>
æ‰€ä»¥ç›®å‰è¿˜æ˜¯ä½¿ç”¨å¾¡ä¸‰å®¶æ¥å·¥ä½œå§(é™¤éä½ ä»¬ä¸åœ¨ä¹),ä½†ä¸ªäººè¿˜æ˜¯æ¨èå­¦ä¸€ä¸‹è¿™ä¸ªä¸œè¥¿,å…¶å®å†…å®¹æ²¡å¤šå°‘,åŠ èµ·æ¥è¿˜æ²¡åˆ° <code>Vue</code> çš„ä¸€ä¸ªå…¥é—¨æŒ‡å—çš„é¡µé¢å¤š.
</p>

<p>
å®åœ¨è¦åœ¨ä½ç‰ˆæœ¬æµè§ˆå™¨ä½¿ç”¨ä¹Ÿæ˜¯å¯ä»¥çš„,å¯ä»¥ä½¿ç”¨ <code>polyfill</code>, æ¯”å¦‚è°·æ­Œçš„<a href="https://github.com/Polymer/polymer">polymer</a>.
</p>

<p>
è€Œæˆ‘è¿™ç¯‡ç¬”è®°ä¹Ÿå°±425è¡Œ,è¿˜æœ‰ä¸€å¤§éƒ¨åˆ†æ˜¯è™šé«˜çš„ä»£ç .çœŸçš„æ„Ÿè§‰ <b>å‰ç«¯éœ€è¦ä¸€å¥—æ ‡å‡†æ‰èƒ½å¤Ÿè®©å¼€å‘è€…ä¸ä¼šé‚£ä¹ˆç´¯</b>.
</p>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="author">Author: saltb0rn (<a href="mailto:asche34@outlook.com">asche34@outlook.com</a>)</p>
<p class="date">Date: 2019-11-17</p>
<p class="creator"><a href="https://www.gnu.org/software/emacs/">Emacs</a> 27.1 (<a href="https://orgmode.org">Org</a> mode 9.4.6)</p>
<p class="validation"><a href="https://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
